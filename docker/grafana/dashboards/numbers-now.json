{
    "title": "Numbers Now",
    "uid": "numbers-now",
    "version": 8,
    "refresh": "10s",
    "links": [
        {
            "title": "API Overview",
            "url": "/d/api-overview",
            "targetBlank": false
        },
        {
            "title": "Alerts Overview",
            "url": "/d/alerts-overview",
            "targetBlank": false
        },
        {
            "title": "Route Detail",
            "url": "/d/route-detail?var-method=All&var-route=All",
            "targetBlank": false
        },
        {
            "title": "Quantum + Ultra Overview",
            "url": "/d/quantum-ultra-overview",
            "targetBlank": false
        },
        {
            "title": "QCAE — Quick View",
            "url": "/d/qcae-overview",
            "targetBlank": false
        }
    ],
    "panels": [
        {
            "title": "Requests /s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(app_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": 0
                            },
                            {
                                "color": "green",
                                "value": 1
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 0,
                "w": 6,
                "h": 5
            }
        },
        {
            "title": "Success % (10m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "(1 - (sum(rate(app_requests_errors_total[10m])) / clamp_min(sum(rate(app_requests_total[10m])), 1e-9))) * 100"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "percentunit",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 95
                            },
                            {
                                "color": "green",
                                "value": 99
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 0,
                "w": 6,
                "h": 5
            }
        },
        {
            "title": "Error rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(app_requests_errors_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 0,
                "w": 6,
                "h": 5
            }
        },
        {
            "title": "Latency p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(app_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 18,
                "y": 0,
                "w": 6,
                "h": 5
            }
        },
        {
            "title": "Inputs total",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(bridge_inputs_by_status)"
                }
            ],
            "gridPos": {
                "x": 0,
                "y": 5,
                "w": 6,
                "h": 5
            }
        },
        {
            "title": "Approved last 1h",
            "type": "stat",
            "targets": [
                {
                    "expr": "increase(bridge_experiments_total[1h])"
                }
            ],
            "gridPos": {
                "x": 6,
                "y": 5,
                "w": 6,
                "h": 5
            }
        },
        {
            "title": "Last updated",
            "type": "stat",
            "targets": [
                {
                    "expr": "time()"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "dateTimeFromNow"
                }
            },
            "gridPos": {
                "x": 12,
                "y": 5,
                "w": 12,
                "h": 2
            }
        },
        {
            "title": "TBA req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(tba_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 0,
                "y": 10,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "TBA errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(tba_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 10,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "TBA p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(tba_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 10,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "RPP req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(rpp_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 18,
                "y": 10,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "RPP errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(rpp_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 14,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "RPP p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(rpp_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 14,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "OCG req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(ocg_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 12,
                "y": 14,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "OCG errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(ocg_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 18,
                "y": 14,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "OCG p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(ocg_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 18,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "MOC req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(moc_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 6,
                "y": 18,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "MOC errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(moc_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 18,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "MOC p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(moc_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 18,
                "y": 18,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(qcae_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 0,
                "y": 22,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(qcae_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 22,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(qcae_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.5
                            },
                            {
                                "color": "red",
                                "value": 1
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 22,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "IEC req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(iec_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 18,
                "y": 22,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "IEC errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(iec_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 26,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "IEC p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(iec_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 26,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "FEA req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(fea_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 12,
                "y": 26,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "FEA errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(fea_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 18,
                "y": 26,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "FEA p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(fea_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 30,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "ESM req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(esm_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 6,
                "y": 30,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "ESM errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(esm_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 30,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "ESM p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(esm_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.2
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 18,
                "y": 30,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "DSP req/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(dsp_requests_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 0,
                "y": 34,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "DSP errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(dsp_requests_total{status=~\"4..|5..\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 34,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "DSP p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(dsp_request_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.5
                            },
                            {
                                "color": "red",
                                "value": 1
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 34,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE quantum jobs/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(qcae_quantum_jobs_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 0,
                "y": 38,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE quantum errors rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(qcae_quantum_jobs_total{status=\"error\"}[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.1
                            },
                            {
                                "color": "red",
                                "value": 0.5
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 6,
                "y": 38,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE quantum p95 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum(rate(qcae_quantum_job_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.5
                            },
                            {
                                "color": "red",
                                "value": 1
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 38,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE quantum shots/s (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(qcae_quantum_shots_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 18,
                "y": 38,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE quantum p99 (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "histogram_quantile(0.99, sum(rate(qcae_quantum_job_duration_seconds_bucket[5m])) by (le))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.8
                            },
                            {
                                "color": "red",
                                "value": 2
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 42,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "QCAE jobs/s by kind",
            "type": "timeseries",
            "targets": [
                {
                    "expr": "sum by (kind) (rate(qcae_quantum_jobs_total[5m]))",
                    "legendFormat": "{{kind}}"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s"
                }
            },
            "gridPos": {
                "x": 6,
                "y": 42,
                "w": 18,
                "h": 8
            }
        },
        {
            "title": "QCAE p95 by kind (5m)",
            "type": "timeseries",
            "targets": [
                {
                    "expr": "histogram_quantile(0.95, sum by (le, kind) (rate(qcae_quantum_job_duration_seconds_bucket[5m])))",
                    "legendFormat": "p95 {{kind}}"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s"
                }
            },
            "gridPos": {
                "x": 0,
                "y": 50,
                "w": 12,
                "h": 8
            }
        },
        {
            "title": "QCAE p99 by kind (5m)",
            "type": "timeseries",
            "targets": [
                {
                    "expr": "histogram_quantile(0.99, sum by (le, kind) (rate(qcae_quantum_job_duration_seconds_bucket[5m])))",
                    "legendFormat": "p99 {{kind}}"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "yellow",
                                "value": 0.8
                            },
                            {
                                "color": "red",
                                "value": 2
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 12,
                "y": 50,
                "w": 12,
                "h": 8
            }
        },
        {
            "title": "Quantum Guardrails — violations rps (5m)",
            "type": "stat",
            "targets": [
                {
                    "expr": "sum(rate(qcae_guardrail_violations_total[5m]))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "req/s",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "red",
                                "value": 0.01
                            }
                        ]
                    }
                }
            },
            "gridPos": {
                "x": 0,
                "y": 58,
                "w": 6,
                "h": 4
            }
        },
        {
            "title": "Last 50 guardrail violations",
            "type": "table",
            "targets": [
                {
                    "expr": "topk(50, increase(qcae_guardrail_violations_total[1h]))"
                }
            ],
            "options": {
                "showHeader": true
            },
            "transformations": [
                {
                    "id": "labelsToFields"
                },
                {
                    "id": "organize",
                    "options": {
                        "indexByName": {
                            "__name__": 0
                        },
                        "renameByName": {
                            "Value": "count (1h)"
                        }
                    }
                }
            ],
            "gridPos": {
                "x": 6,
                "y": 58,
                "w": 18,
                "h": 6
            }
        },
        {
            "title": "Top offenders by kind (violations 1h)",
            "type": "bargauge",
            "targets": [
                {
                    "expr": "topk(5, sum by (kind) (increase(qcae_guardrail_violations_total[1h])))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short"
                }
            },
            "gridPos": {
                "x": 0,
                "y": 62,
                "w": 12,
                "h": 6
            }
        },
        {
            "title": "Top offenders by type (violations 1h)",
            "type": "bargauge",
            "targets": [
                {
                    "expr": "topk(5, sum by (type) (increase(qcae_guardrail_violations_total[1h])))"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "short"
                }
            },
            "gridPos": {
                "x": 12,
                "y": 62,
                "w": 12,
                "h": 6
            }
        }
    ]
}
